<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<title>Rico 3.0 - Events</title>

<script src="LoadRicoClient.js" type="text/javascript"></script>
<link href="../demo.css" type="text/css" rel="stylesheet" />

<script type='text/javascript'>
Rico.TestClass=function(name,msg) {
  this.initialize(name,msg);
}

Rico.TestClass.prototype = {
  initialize: function(name,msg) {
    this.msg=msg;
    this.addBtn=document.getElementById('add'+name);
    this.remBtn=document.getElementById('rem'+name);
    this.tstBtn=document.getElementById('tst'+name);
    Rico.eventBind(this.addBtn, 'click', Rico.eventHandle(this,'addClick'));
    Rico.eventBind(this.remBtn, 'click', Rico.eventHandle(this,'remClick'));
    this.tstHandle=Rico.eventHandle(this,'tstClick');
    this.isAttached=false;
  },
  addClick: function(e) {
    if (this.isAttached) {
      alert('already attached!');
    } else {
      Rico.eventBind(this.tstBtn, 'click', this.tstHandle);
      this.isAttached=true;
    }
  },
  remClick: function(e) {
    if (this.isAttached) {
      Rico.eventUnbind(this.tstBtn, 'click', this.tstHandle);
      this.isAttached=false;
    } else {
      alert('not attached!');
    }
  },
  tstClick: function(e) {
    var elem=Rico.eventElement(e);
    var loc=Rico.eventClient(e);
    alert(this.msg+'\nElement '+elem.id+' clicked at '+loc.x+','+loc.y);
  }
}

Rico.onLoad(function() {
  var a=new Rico.TestClass('A','i am A king');
  var b=new Rico.TestClass('B','i am the queen B');
});
</script>

</head>

<body>

<div id='explanation'>
Base Library: 
<script type='text/javascript'>
document.write(Rico.Lib+' '+Rico.LibVersion);
</script>
<hr>
<h1>Rico: Events</h1>
<p>In this example, the "Add" button adds an event to the "Test" button. 
Conversely, the "Remove" button removes that event from the "Test" button.
</p>
</div>

<p>
<button id='addA'>Add event to A</button>
<button id='remA'>Remove event from A</button>
<button id='tstA'>Test A</button>
</p>

<p>
<button id='addB'>Add event to B</button>
<button id='remB'>Remove event from B</button>
<button id='tstB'>Test B</button>
</p>

</body>
</html>
